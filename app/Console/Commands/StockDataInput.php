<?php

namespace App\Console\Commands;

use DB;
use Illuminate\Console\Command;

class StockDataInput extends Command
{

    protected $signature = 'StockDataInput';

    protected $description = 'Command description';

    public function handle()
    {

        $ary = [];

        $str = "
        101	EPI	ウィズダムツリー インド株収益ファンド	5	3,897.60
        102	INFY	インフォシス・テクノロジーズ	5	2,653.60
        103	JMIA	ジュミア・テクノロジーズ	5	2,490.00
        ";

        $ex_str = explode("\n", $str);

        foreach($ex_str as $v){
            if(trim($v) == ''){
                continue;
            }

            list($no, $ticker, $name, $hoyuu_suuryou, $heikin_shutoku_kagaku) = explode("\t", trim($v));

            $ary[$no] = [
                'ticker' => $ticker,
                'name' => $name,
                'hoyuu_suuryou' => $hoyuu_suuryou,
                'heikin_shutoku_kagaku' => $heikin_shutoku_kagaku
            ];
        }

//print_r($ary);

$str2 = "
3401	2024/12/23	101	19488	36128
3419	2024/12/24	101	19488	36122
3437	2024/12/25	101	19488	36199
3455	2024/12/26	101	19488	36217
3473	2024/12/27	101	19488	36151
3491	2025/1/6	101	19488	36135
3509	2025/1/7	101	19488	35471
3527	2025/1/8	101	19488	35606
3545	2025/1/9	101	19488	35589
3563	2025/1/10	101	19488	34613
3581	2025/1/14	101	19488	34091
3599	2025/1/15	101	19488	34268
3617	2025/1/16	101	19488	34320
3635	2025/1/17	101	19488	34164
3654	2025/1/20	101	19488	34341
3673	2025/1/21	101	19488	34250
3692	2025/1/22	101	19488	34126
3711	2025/1/23	101	19488	34090
3730	2025/1/24	101	19488	34105
3749	2025/1/27	101	19488	33566
3768	2025/1/28	101	19488	33457
3787	2025/1/29	101	19488	33156
3806	2025/1/30	101	19488	33338
3825	2025/1/31	101	19488	33690
3844	2025/2/3	101	19488	33913
3863	2025/2/4	101	19488	33553
3882	2025/2/5	101	19488	33505
3901	2025/2/6	101	19488	33386
3920	2025/2/7	101	19488	32964
3939	2025/2/10	101	19488	32820
3958	2025/2/12	101	19488	32784
3977	2025/2/13	101	19488	32595
3996	2025/2/14	101	19488	32665
4015	2025/2/17	101	19488	31854
4034	2025/2/18	101	19488	31871
4053	2025/2/19	101	19488	31814
4072	2025/2/20	101	19488	31640
4091	2025/2/21	101	19488	32019
4110	2025/2/25	101	19488	31210
4129	2025/2/26	101	19488	31096
4148	2025/2/27	101	19488	31099
4167	2025/2/28	101	19488	30749
4186	2025/3/3	101	19488	30446
4205	2025/3/4	101	19488	29867
4224	2025/3/5	101	19488	30026
4243	2025/3/6	101	19488	30634
4262	2025/3/7	101	19488	30510
4281	2025/3/10	101	19488	30646
4300	2025/3/11	101	19488	30168
4319	2025/3/12	101	19488	30639
4338	2025/3/13	101	19488	30427
4357	2025/3/14	101	19488	30567
4376	2025/3/17	101	19488	30807
4395	2025/3/18	101	19488	31320
4414	2025/3/19	101	19488	31489
4433	2025/3/21	101	19488	32062
4452	2025/3/24	101	19488	32636
4471	2025/3/25	101	19488	33322
4490	2025/3/26	101	19488	33285
4509	2025/3/27	101	19488	32807
4528	2025/3/28	101	19488	33076
4547	2025/3/31	101	19488	32433
4566	2025/4/1	101	19488	32690
4585	2025/4/2	101	19488	32531
4604	2025/4/3	101	19488	32350
4623	2025/4/4	101	19488	31848
4642	2025/4/7	101	19488	30318
4661	2025/4/8	101	19488	30522
4680	2025/4/9	101	19488	30049
4699	2025/4/10	101	19488	31571
4718	2025/4/11	101	19488	30314
4737	2025/4/14	101	19488	30534
4756	2025/4/15	101	19488	30904
4775	2025/4/16	101	19488	30731
4794	2025/4/17	101	19488	30777
4813	2025/4/18	101	19488	31352
4832	2025/4/21	101	19488	30957
4851	2025/4/22	101	19488	31538
4870	2025/4/23	101	19488	32075
4889	2025/4/24	101	19488	32028
4908	2025/4/25	101	19488	32671
4927	2025/4/28	101	19488	32212
4946	2025/4/30	101	19488	32381
4965	2025/5/1	101	19488	32775
4983	2025/5/2	101	19488	32803
5002	2025/5/7	101	19488	32512
5021	2025/5/8	101	19488	32531
5040	2025/5/9	101	19488	31633
5059	2025/5/12	101	19488	32732
5078	2025/5/13	101	19488	33979
5097	2025/5/14	101	19488	33607
5116	2025/5/15	101	19488	33564
5135	2025/5/16	101	19488	33822
5154	2025/5/19	101	19488	33696
5173	2025/5/20	101	19488	33732
5192	2025/5/21	101	19488	33189
5211	2025/5/22	101	19488	32945
5230	2025/5/23	101	19488	32817
5249	2025/5/26	101	19488	33134
5268	2025/5/27	101	19488	33282
5287	2025/5/28	101	19488	33478
5306	2025/5/29	101	19488	33643
5325	2025/5/30	101	19488	33501
5344	2025/6/2	101	19488	33052
5363	2025/6/3	101	19488	33213
5382	2025/6/4	101	19488	33160
5401	2025/6/5	101	19488	32963
5420	2025/6/6	101	19488	33204
5439	2025/6/9	101	19488	33672
5458	2025/6/10	101	19488	34021
5477	2025/6/11	101	19488	34252
5496	2025/6/12	101	19488	33952
5515	2025/6/13	101	19488	33695
5534	2025/6/16	101	19488	33358
5553	2025/6/17	101	19488	33681
5572	2025/6/18	101	19488	33318
5591	2025/6/19	101	19488	33343
5610	2025/6/20	101	19488	33329
5629	2025/6/23	101	19488	33834
5648	2025/6/24	101	19488	33492
5667	2025/6/25	101	19488	33857
5686	2025/6/26	101	19488	33712
5705	2025/6/27	101	19488	34188
5724	2025/6/30	101	19488	34200
5743	2025/7/1	101	19488	34088
5762	2025/7/2	101	19488	34274
5781	2025/7/3	101	19488	34126
5800	2025/7/4	101	19488	34376
5819	2025/7/7	101	19488	34596
5838	2025/7/8	101	19488	34481
5857	2025/7/9	101	19488	34823
5876	2025/7/10	101	19488	34648
5895	2025/7/11	101	19488	34517
5914	2025/7/14	101	19488	34435
5933	2025/7/15	101	19488	34588
5952	2025/7/16	101	19488	34761
5971	2025/7/17	101	19488	34992
5990	2025/7/18	101	19488	34881
6009	2025/7/22	101	19488	34475
6028	2025/7/23	101	19488	34165
6047	2025/7/24	101	19488	34140
6066	2025/7/25	101	19488	34017
6085	2025/7/28	101	19488	33976
6104	2025/7/29	101	19488	33618
6123	2025/7/30	101	19488	33662
6142	2025/7/31	101	19488	33517
6161	2025/8/1	101	19488	33685
3402	2024/12/23	102	13268	17805
3420	2024/12/24	102	13268	17892
3438	2024/12/25	102	13268	17910
3456	2024/12/26	102	13268	17919
3474	2024/12/27	102	13268	17862
3492	2025/1/6	102	13268	17839
3510	2025/1/7	102	13268	17908
3528	2025/1/8	102	13268	17858
3546	2025/1/9	102	13268	18012
3564	2025/1/10	102	13268	17902
3582	2025/1/14	102	13268	17872
3600	2025/1/15	102	13268	17647
3618	2025/1/16	102	13268	17866
3636	2025/1/17	102	13268	16782
3655	2025/1/20	102	13268	16527
3674	2025/1/21	102	13268	16483
3693	2025/1/22	102	13268	16459
3712	2025/1/23	102	13268	16916
3731	2025/1/24	102	13268	16901
3750	2025/1/27	102	13268	16709
3769	2025/1/28	102	13268	16767
3788	2025/1/29	102	13268	16706
3807	2025/1/30	102	13268	16769
3826	2025/1/31	102	13268	16872
3845	2025/2/3	102	13268	17069
3864	2025/2/4	102	13268	17052
3883	2025/2/5	102	13268	17124
3902	2025/2/6	102	13268	17029
3921	2025/2/7	102	13268	16884
3940	2025/2/10	102	13268	16631
3959	2025/2/12	102	13268	16856
3978	2025/2/13	102	13268	16744
3997	2025/2/14	102	13268	16596
4016	2025/2/17	102	13268	16367
4035	2025/2/18	102	13268	16375
4054	2025/2/19	102	13268	16244
4073	2025/2/20	102	13268	15940
4092	2025/2/21	102	13268	16077
4111	2025/2/25	102	13268	15564
4130	2025/2/26	102	13268	15518
4149	2025/2/27	102	13268	15560
4168	2025/2/28	102	13268	15420
4187	2025/3/3	102	13268	15092
4206	2025/3/4	102	13268	14777
4225	2025/3/5	102	13268	14718
4244	2025/3/6	102	13268	14879
4263	2025/3/7	102	13268	14558
4282	2025/3/10	102	13268	14606
4301	2025/3/11	102	13268	14307
4320	2025/3/12	102	13268	14093
4339	2025/3/13	102	13268	13665
4358	2025/3/14	102	13268	13609
4377	2025/3/17	102	13268	13682
4396	2025/3/18	102	13268	13904
4415	2025/3/19	102	13268	13767
4434	2025/3/21	102	13268	13488
4453	2025/3/24	102	13268	13713
4472	2025/3/25	102	13268	14005
4491	2025/3/26	102	13268	14177
4510	2025/3/27	102	13268	14031
4529	2025/3/28	102	13268	14051
4548	2025/3/31	102	13268	13553
4567	2025/4/1	102	13268	13649
4586	2025/4/2	102	13268	13610
4605	2025/4/3	102	13268	13548
4624	2025/4/4	102	13268	12702
4643	2025/4/7	102	13268	12121
4662	2025/4/8	102	13268	12359
4681	2025/4/9	102	13268	11947
4700	2025/4/10	102	13268	12942
4719	2025/4/11	102	13268	12105
4738	2025/4/14	102	13268	12062
4757	2025/4/15	102	13268	12197
4776	2025/4/16	102	13268	12145
4795	2025/4/17	102	13268	11848
4814	2025/4/18	102	13268	11490
4833	2025/4/21	102	13268	11345
4852	2025/4/22	102	13268	11643
4871	2025/4/23	102	13268	11948
4890	2025/4/24	102	13268	12279
4909	2025/4/25	102	13268	12448
4928	2025/4/28	102	13268	12502
4947	2025/4/30	102	13268	12548
4966	2025/5/1	102	13268	12728
4984	2025/5/2	102	13268	12745
5003	2025/5/7	102	13268	12728
5022	2025/5/8	102	13268	12811
5041	2025/5/9	102	13268	12698
5060	2025/5/12	102	13268	12934
5079	2025/5/13	102	13268	13794
5098	2025/5/14	102	13268	13457
5117	2025/5/15	102	13268	13463
5136	2025/5/16	102	13268	13586
5155	2025/5/19	102	13268	13265
5174	2025/5/20	102	13268	13226
5193	2025/5/21	102	13268	13106
5212	2025/5/22	102	13268	13000
5231	2025/5/23	102	13268	12926
5250	2025/5/26	102	13268	12932
5269	2025/5/27	102	13268	12990
5288	2025/5/28	102	13268	13326
5307	2025/5/29	102	13268	13346
5326	2025/5/30	102	13268	13291
5345	2025/6/2	102	13268	12996
5364	2025/6/3	102	13268	12981
5383	2025/6/4	102	13268	12990
5402	2025/6/5	102	13268	12788
5421	2025/6/6	102	13268	12903
5440	2025/6/9	102	13268	13125
5459	2025/6/10	102	13268	13233
5478	2025/6/11	102	13268	13435
5497	2025/6/12	102	13268	13355
5516	2025/6/13	102	13268	13334
5535	2025/6/16	102	13268	13279
5554	2025/6/17	102	13268	13563
5573	2025/6/18	102	13268	13537
5592	2025/6/19	102	13268	13394
5611	2025/6/20	102	13268	13388
5630	2025/6/23	102	13268	13038
5649	2025/6/24	102	13268	13124
5668	2025/6/25	102	13268	13295
5687	2025/6/26	102	13268	13339
5706	2025/6/27	102	13268	13438
5725	2025/6/30	102	13268	13328
5744	2025/7/1	102	13268	13306
5763	2025/7/2	102	13268	13600
5782	2025/7/3	102	13268	13578
5801	2025/7/4	102	13268	13684
5820	2025/7/7	102	13268	13771
5839	2025/7/8	102	13268	13751
5858	2025/7/9	102	13268	13860
5877	2025/7/10	102	13268	13763
5896	2025/7/11	102	13268	13287
5915	2025/7/14	102	13268	13401
5934	2025/7/15	102	13268	13302
5953	2025/7/16	102	13268	13562
5972	2025/7/17	102	13268	13744
5991	2025/7/18	102	13268	13739
6010	2025/7/22	102	13268	13436
6029	2025/7/23	102	13268	13404
6048	2025/7/24	102	13268	13502
6067	2025/7/25	102	13268	13057
6086	2025/7/28	102	13268	12877
6105	2025/7/29	102	13268	12737
6124	2025/7/30	102	13268	12735
6143	2025/7/31	102	13268	12681
6162	2025/8/1	102	13268	12585
3403	2024/12/23	103	12450	3156
3421	2024/12/24	103	12450	3133
3439	2024/12/25	103	12450	3319
3457	2024/12/26	103	12450	3321
3475	2024/12/27	103	12450	3266
3493	2025/1/6	103	12450	3113
3511	2025/1/7	103	12450	3266
3529	2025/1/8	103	12450	3175
3547	2025/1/9	103	12450	3060
3565	2025/1/10	103	12450	3020
3583	2025/1/14	103	12450	2922
3601	2025/1/15	103	12450	2861
3619	2025/1/16	103	12450	2950
3637	2025/1/17	103	12450	2909
3656	2025/1/20	103	12450	2885
3675	2025/1/21	103	12450	2878
3694	2025/1/22	103	12450	2972
3713	2025/1/23	103	12450	3005
3732	2025/1/24	103	12450	3057
3751	2025/1/27	103	12450	3067
3770	2025/1/28	103	12450	3004
3789	2025/1/29	103	12450	3142
3808	2025/1/30	103	12450	3052
3827	2025/1/31	103	12450	3255
3846	2025/2/3	103	12450	3102
3865	2025/2/4	103	12450	3016
3884	2025/2/5	103	12450	3121
3903	2025/2/6	103	12450	3060
3922	2025/2/7	103	12450	3059
3941	2025/2/10	103	12450	3039
3960	2025/2/12	103	12450	2961
3979	2025/2/13	103	12450	3087
3998	2025/2/14	103	12450	3175
4017	2025/2/17	103	12450	3149
4036	2025/2/18	103	12450	3150
4055	2025/2/19	103	12450	3065
4074	2025/2/20	103	12450	2916
4093	2025/2/21	103	12450	2123
4112	2025/2/25	103	12450	2024
4131	2025/2/26	103	12450	1927
4150	2025/2/27	103	12450	1895
4169	2025/2/28	103	12450	1827
4188	2025/3/3	103	12450	1839
4207	2025/3/4	103	12450	1721
4226	2025/3/5	103	12450	1799
4245	2025/3/6	103	12450	1891
4264	2025/3/7	103	12450	1754
4283	2025/3/10	103	12450	1779
4302	2025/3/11	103	12450	1670
4321	2025/3/12	103	12450	1701
4340	2025/3/13	103	12450	1743
4359	2025/3/14	103	12450	1703
4378	2025/3/17	103	12450	1740
4397	2025/3/18	103	12450	1841
4416	2025/3/19	103	12450	1775
4435	2025/3/21	103	12450	1814
4454	2025/3/24	103	12450	1848
4473	2025/3/25	103	12450	1921
4492	2025/3/26	103	12450	1897
4511	2025/3/27	103	12450	1774
4530	2025/3/28	103	12450	1761
4549	2025/3/31	103	12450	1670
4568	2025/4/1	103	12450	1607
4587	2025/4/2	103	12450	1630
4606	2025/4/3	103	12450	1620
4625	2025/4/4	103	12450	1449
4644	2025/4/7	103	12450	1301
4663	2025/4/8	103	12450	1296
4682	2025/4/9	103	12450	1258
4701	2025/4/10	103	12450	1509
4720	2025/4/11	103	12450	1397
4739	2025/4/14	103	12450	1464
4758	2025/4/15	103	12450	1498
4777	2025/4/16	103	12450	1504
4796	2025/4/17	103	12450	1464
4815	2025/4/18	103	12450	1494
4834	2025/4/21	103	12450	1476
4853	2025/4/22	103	12450	1481
4872	2025/4/23	103	12450	1523
4891	2025/4/24	103	12450	1617
4910	2025/4/25	103	12450	1678
4929	2025/4/28	103	12450	1753
4948	2025/4/30	103	12450	1749
4967	2025/5/1	103	12450	1713
4985	2025/5/2	103	12450	1759
5004	2025/5/7	103	12450	1805
5023	2025/5/8	103	12450	1736
5042	2025/5/9	103	12450	2083
5061	2025/5/12	103	12450	2440
5080	2025/5/13	103	12450	2625
5099	2025/5/14	103	12450	2526
5118	2025/5/15	103	12450	2384
5137	2025/5/16	103	12450	2220
5156	2025/5/19	103	12450	2325
5175	2025/5/20	103	12450	2265
5194	2025/5/21	103	12450	2191
5213	2025/5/22	103	12450	2083
5232	2025/5/23	103	12450	2343
5251	2025/5/26	103	12450	2313
5270	2025/5/27	103	12450	2324
5289	2025/5/28	103	12450	2472
5308	2025/5/29	103	12450	2398
5327	2025/5/30	103	12450	2289
5346	2025/6/2	103	12450	2386
5365	2025/6/3	103	12450	2340
5384	2025/6/4	103	12450	2333
5403	2025/6/5	103	12450	2364
5422	2025/6/6	103	12450	2338
5441	2025/6/9	103	12450	2430
5460	2025/6/10	103	12450	2481
5479	2025/6/11	103	12450	2598
5498	2025/6/12	103	12450	2382
5517	2025/6/13	103	12450	2277
5536	2025/6/16	103	12450	2198
5555	2025/6/17	103	12450	2322
5574	2025/6/18	103	12450	2255
5593	2025/6/19	103	12450	2289
5612	2025/6/20	103	12450	2288
5631	2025/6/23	103	12450	2374
5650	2025/6/24	103	12450	2342
5669	2025/6/25	103	12450	2506
5688	2025/6/26	103	12450	2342
5707	2025/6/27	103	12450	2434
5726	2025/6/30	103	12450	2634
5745	2025/7/1	103	12450	2886
5764	2025/7/2	103	12450	3360
5783	2025/7/3	103	12450	3171
5802	2025/7/4	103	12450	3197
5821	2025/7/7	103	12450	3217
5840	2025/7/8	103	12450	3112
5859	2025/7/9	103	12450	3103
5878	2025/7/10	103	12450	3232
5897	2025/7/11	103	12450	3266
5916	2025/7/14	103	12450	3190
5935	2025/7/15	103	12450	3146
5954	2025/7/16	103	12450	3334
5973	2025/7/17	103	12450	3358
5992	2025/7/18	103	12450	3414
6011	2025/7/22	103	12450	3449
6030	2025/7/23	103	12450	3501
6049	2025/7/24	103	12450	3549
6068	2025/7/25	103	12450	3618
6087	2025/7/28	103	12450	3595
6106	2025/7/29	103	12450	3681
6125	2025/7/30	103	12450	3411
6144	2025/7/31	103	12450	3374
6163	2025/8/1	103	12450	3530
";

$ex_str2 = explode("\n", $str2);

foreach($ex_str2 as $k2=>$v2){
    if(trim($v2) == ''){
        continue;
    }

    /*
    if($k2 > 3){
        break;
    }
    */

    list($_, $date, $no, $__, $jika_hyoukagaku) = explode("\t", trim($v2));
    list($year, $m, $d) = explode("/", $date);
    $month = sprintf("%02d", $m);
    $day = sprintf("%02d", $d);

    $ary2 = $ary[$no];

    $insert = [
        'year' => $year,
        'month' => $month,
        'day' => $day,
        'ticker' => $ary2['ticker'],
        'name' => $ary2['name'],
        'hoyuu_suuryou' => $ary2['hoyuu_suuryou'],
        'heikin_shutoku_kagaku' => $ary2['heikin_shutoku_kagaku'],
        'jika_hyoukagaku' => $jika_hyoukagaku,
    ];

    print_r($insert);

    DB::table('t_stock_datas')->insert($insert);
}

/*
            list($no, $ticker, $name, $hoyuu_suuryou, $heikin_shutoku_kagaku) = explode("\t", trim($v));

            $ary[$no] = [
                'ticker' => $ticker,
                'name' => $name,
                'hoyuu_suuryou' => $hoyuu_suuryou,
                'heikin_shutoku_kagaku' => $heikin_shutoku_kagaku
            ];
*/

    }
}
